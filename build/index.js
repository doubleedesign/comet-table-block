(()=>{"use strict";var e,t={20:(e,t,n)=>{var o=n(609),l=Symbol.for("react.element"),c=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var o,s={},i=null,d=null;for(o in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(d=t.ref),t)c.call(t,o)&&!r.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===s[o]&&(s[o]=t[o]);return{$$typeof:l,type:e,key:i,ref:d,props:s,_owner:a.current}}},374:(e,t,n)=>{var o=n(609);const l=window.wp.i18n,c=window.wp.blocks,a=window.wp.blockEditor,r=window.wp.hooks,s=window.wp.compose,i=window.wp.apiFetch;var d=n.n(i);const m=window.wp.data,h=window.wp.primitives;var v=n(848);const u=(0,v.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,v.jsx)(h.Path,{d:"M13 5.5H4V4h9v1.5Zm7 7H4V11h16v1.5Zm-7 7H4V18h9v1.5Z"})}),p=(0,v.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,v.jsx)(h.Path,{d:"M7.5 5.5h9V4h-9v1.5Zm-3.5 7h16V11H4v1.5Zm3.5 7h9V18h-9v1.5Z"})}),x=(0,v.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,v.jsx)(h.Path,{d:"M11.111 5.5H20V4h-8.889v1.5ZM4 12.5h16V11H4v1.5Zm7.111 7H20V18h-8.889v1.5Z"})}),w=window.wp.components,g=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Polygon,{points:"17.5 1 7.8 5.6 10.8 6 6.5 10 16.5 5.5 13.4 5 17.5 1"}),(0,o.createElement)(w.Path,{d:"M19,11H5c-1.1,0-2,.9-2,2v8c0,1.1.9,2,2,2h14c1.1,0,2-.9,2-2v-8c0-1.1-.9-2-2-2ZM11.5,16.5h-7v-3.5c0-.3.2-.5.5-.5h6.5v4ZM13,12.5h6c.3,0,.5.2.5.5v3.5h-6.5v-4ZM4.5,21v-3h7v3.5h-6.5c-.3,0-.5-.2-.5-.5ZM19,21.5h-6v-3.5h6.5v3c0,.3-.2.5-.5.5Z"})),b=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M9 20h6V9H9v11zM4 4v1.5h16V4H4z"})),f=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M20 11h-5V4H9v7H4v1.5h5V20h6v-7.5h5z"})),_=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M15 4H9v11h6V4zM4 18.5V20h16v-1.5H4z"})),S=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M15.8,8.3h-3v-3s-1.5,0-1.5,0v3h-3s0,1.5,0,1.5h3v3s1.5,0,1.5,0v-3h3s0-1.5,0-1.5ZM4,2h16c1.1,0,2,.9,2,2v16c0,1.1-.9,2-2,2H4c-1.1,0-2-.9-2-2V4c0-1.1.9-2,2-2ZM20.5,14.5V4c0-.3-.2-.5-.5-.5H4c-.3,0-.5.2-.5.5v10.5s17,0,17,0ZM20.4,20v-4s-4.7,0-4.7,0v4.5s4.3,0,4.3,0c.3,0,.5-.2.4-.5ZM14.2,20.5v-4.5s-4.5,0-4.5,0v4.5s4.5,0,4.5,0ZM8.2,20.5v-4.5s-4.8,0-4.8,0v4c0,.3.2.5.5.5h4.2s.1,0,.1,0Z"})),C=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M8.2,15.7h3v3s1.5,0,1.5,0v-3h3s0-1.5,0-1.5h-3v-3s-1.5,0-1.5,0v3h-3s0,1.5,0,1.5ZM20,22H4c-1.1,0-2-.9-2-2V4c0-1.1.9-2,2-2h16c1.1,0,2,.9,2,2v16c0,1.1-.9,2-2,2ZM3.5,9.5v10.5c0,.3.2.5.5.5h16c.3,0,.5-.2.5-.5v-10.5s-17,0-17,0ZM3.6,4v4s4.7,0,4.7,0V3.5s-4.3,0-4.3,0c-.3,0-.5.2-.4.5ZM9.8,3.5v4.5s4.5,0,4.5,0V3.5s-4.5,0-4.5,0ZM15.8,3.5v4.5s4.8,0,4.8,0v-4c0-.3-.2-.5-.5-.5h-4.2s-.1,0-.1,0Z"})),I=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M8.3,8.2v3h-3s0,1.5,0,1.5h3v3s1.5,0,1.5,0v-3h3s0-1.5,0-1.5h-3v-3s-1.5,0-1.5,0ZM2,20V4c0-1.1.9-2,2-2h16c1.1,0,2,.9,2,2v16c0,1.1-.9,2-2,2H4c-1.1,0-2-.9-2-2ZM14.5,3.5H4c-.3,0-.5.2-.5.5v16c0,.3.2.5.5.5h10.5s0-17,0-17ZM20,3.6h-4s0,4.7,0,4.7h4.5s0-4.3,0-4.3c0-.3-.2-.5-.5-.4ZM20.5,9.8h-4.5s0,4.5,0,4.5h4.5s0-4.5,0-4.5ZM20.5,15.8h-4.5s0,4.8,0,4.8h4c.3,0,.5-.2.5-.5v-4.2s0-.1,0-.1Z"})),E=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M15.8,15.8v-3h3v-1.5h-3v-3h-1.5v3h-3v1.5h3v3h1.5ZM22,4v16c0,1.1-.9,2-2,2H4c-1.1,0-2-.9-2-2V4c0-1.1.9-2,2-2h16c1.1,0,2,.9,2,2ZM9.5,20.5h10.5c.3,0,.5-.2.5-.5V4c0-.3-.2-.5-.5-.5h-10.5v17ZM4,20.4h4v-4.7H3.5v4.3c0,.3.2.5.5.4ZM3.5,14.2h4.5v-4.5H3.5v4.5ZM3.5,8.2h4.5V3.4h-4c-.3,0-.5.2-.5.5v4.2h0Z"})),y=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M20,2H4c-1.1,0-2,.9-2,2v16c0,1.1.9,2,2,2h16c1.1,0,2-.9,2-2V4c0-1.1-.9-2-2-2ZM20.5,4v4.4h-4.1l.6.7-.6.8h4.1v4.2h-4.1l.6.8-.6.8h4.1v4.4c0,.3-.2.5-.5.5H4c-.3,0-.5-.3-.5-.6v-4.3h4.1l-.6-.8.6-.8H3.5v-4.2h4.1l-.6-.8.6-.7H3.5v-4.4c0-.3.2-.5.5-.5h16c.3,0,.5.2.5.5ZM8.1,14.8l2.8-2.8-2.8-2.8,1.1-1.1,2.8,2.8,2.8-2.8,1.1,1.1-2.8,2.8,2.8,2.8-1.1,1.1-2.8-2.8-2.8,2.8-1.1-1.1Z"})),k=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M2,4v16c0,1.1.9,2,2,2h16c1.1,0,2-.9,2-2V4c0-1.1-.9-2-2-2H4c-1.1,0-2,.9-2,2ZM4,3.5h4.4v4.1s.7-.6.7-.6l.8.6V3.5h4.2v4.1s.7-.6.7-.6l.7.6V3.5h4.4c.3,0,.5.2.5.5v16c0,.3-.3.5-.6.5h-4.3v-4.1s-.7.6-.7.6l-.7-.6v4.1h-4.2v-4.1s-.8.6-.8.6l-.7-.6v4.1h-4.4c-.3,0-.5-.2-.5-.5V4c0-.3.2-.5.5-.5ZM14.8,15.9l-2.8-2.8-2.8,2.8-1.1-1.1,2.8-2.8-2.8-2.8,1.1-1.1,2.8,2.8,2.8-2.8,1.1,1.1-2.8,2.8,2.8,2.8-1.1,1.1Z"})),M=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M2,20V4c0-1.1.9-2,2-2h16c1.1,0,2,.9,2,2v16c0,1.1-.9,2-2,2H4c-1.1,0-2-.9-2-2ZM8.2,3.5h-4.2c-.3,0-.5.2-.5.5v3.5h4.7V3.5ZM14.2,3.5h-4.5v4h4.5s0-4,0-4ZM20,3.5h-4.3v4h4.8v-3.5c0-.3-.2-.5-.5-.5ZM19,10.5H5v3h14v-3ZM8.2,16.5H3.5v3.5c0,.3.2.5.5.5h4.2v-4ZM14.2,16.5h-4.5v4h4.5s0-4,0-4ZM20.5,16.5h-4.8v4h4.3c.3,0,.5-.2.5-.5v-3.5Z"})),N=(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M2,20V4c0-1.1.9-2,2-2h16c1.1,0,2,.9,2,2v16c0,1.1-.9,2-2,2H4c-1.1,0-2-.9-2-2ZM4,3.5c-.3,0-.5.2-.5.5v3.5h17v-3.5c0-.3-.2-.5-.5-.5H4ZM15.2,13.5h3.8v-3h-3.8v3ZM10.2,10.5v3h3.5v-3h-3.5ZM8.7,10.5h-3.7v3h3.7v-3ZM20,20.5c.3,0,.5-.2.5-.5v-3.5H3.5v3.5c0,.3.2.5.5.5h16Z"})),H=((0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M9.2,3h-4.2c-1.1,0-2,.9-2,2v4.8c0,.8.7,1.5,1.5,1.5h4.8c1.1,0,2-.9,2-2v-4.2c0-1.1-.9-2-2-2ZM9.2,9.8h-4.2c-.3,0-.5-.2-.5-.5v-4.2c0-.3.2-.5.5-.5h4.2c.3,0,.5.2.5.5v4.2c0,.3-.2.5-.5.5Z"}),(0,o.createElement)(w.Path,{d:"M19,3h-4.2c-1.1,0-2,.9-2,2v4.8c0,.8.7,1.5,1.5,1.5h4.8c1.1,0,2-.9,2-2v-4.2c0-1.1-.9-2-2-2ZM19,9.8h-4.2c-.3,0-.5-.2-.5-.5v-4.2c0-.3.2-.5.5-.5h4.2c.3,0,.5.2.5.5v4.2c0,.3-.2.5-.5.5Z"}),(0,o.createElement)(w.Path,{d:"M9.2,12.8h-4.2c-1.1,0-2,.9-2,2v4.8c0,.8.7,1.5,1.5,1.5h4.8c1.1,0,2-.9,2-2v-4.2c0-1.1-.9-2-2-2ZM9.2,19.5h-4.2c-.3,0-.5-.2-.5-.5v-4.2c0-.3.2-.5.5-.5h4.2c.3,0,.5.2.5.5v4.2c0,.3-.2.5-.5.5Z"}),(0,o.createElement)(w.Path,{d:"M19,12.7h-4.2c-1.1,0-2,.9-2,2v4.8c0,.8.7,1.5,1.5,1.5h4.8c1.1,0,2-.9,2-2v-4.2c0-1.1-.9-2-2-2ZM19,19.5h-4.2c-.3,0-.5-.2-.5-.5v-4.2c0-.3.2-.5.5-.5h4.2c.3,0,.5.2.5.5v4.2c0,.3-.2.5-.5.5Z"})),(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M19,3H5c-1.1,0-2,.9-2,2v14c0,1.1.9,2,2,2h14c1.1,0,2-.9,2-2V5c0-1.1-.9-2-2-2ZM5,19.5c-.3,0-.5-.2-.5-.5v-6.2h6.8v6.8M11.2,11.2h-6.8v-6.2c0-.3.2-.5.5-.5h6.2v6.8ZM19.5,19c0,.3-.2.5-.5.5h-6.2v-6.8h6.8v6.2c.1,0,0,0,0,0ZM19.5,11.2h-6.8v-6.8h6.2c.3,0,.5.2.5.5v6.2Z"})),(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)("path",{d:"M4,11.2h16v1.5H4v-1.5Z"})),(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Circle,{cx:"6",cy:"12",r:"2"}),(0,o.createElement)(w.Circle,{cx:"18",cy:"12",r:"2"}),(0,o.createElement)(w.Circle,{cx:"12",cy:"12",r:"2"})),(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M4,11.2h4v1.5h-4v-1.5Z"}),(0,o.createElement)(w.Path,{d:"M16,11.2h4v1.5h-4v-1.5Z"}),(0,o.createElement)(w.Path,{d:"M10,11.2h4v1.5h-4v-1.5Z"})),(0,o.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(w.Path,{d:"M4,9.2h16v1.5H4v-1.5Z"}),(0,o.createElement)(w.Path,{d:"M4,13.2h16v1.5H4v-1.5Z"})),"comet"),Z=["%","px","em","rem"],V={head:(0,l.__)("Header cell text","comet"),body:(0,l.__)("Body cell text","comet"),foot:(0,l.__)("Footer cell text","comet")},B=[{icon:u,label:(0,l.__)("Align left","comet"),value:"left"},{icon:p,label:(0,l.__)("Align center","comet"),value:"center"},{icon:x,label:(0,l.__)("Align right","comet"),value:"right"}],T=[{icon:b,label:(0,l.__)("Align top","comet"),value:"top"},{icon:f,label:(0,l.__)("Align middle","comet"),value:"middle"},{icon:_,label:(0,l.__)("Align bottom","comet"),value:"bottom"}],P=[{label:(0,l._x)("none","Fixed headers","comet"),value:"none"},{label:(0,l.__)("Fixed header row","comet"),value:"header"},{label:(0,l.__)("Fixed first column","comet"),value:"first-column"}],O=[{label:(0,l.__)("Header (<th>)","comet"),value:"th"},{label:(0,l.__)("Data (<td>)","comet"),value:"td"}],A=[{label:(0,l.__)("default / automatic","comet"),value:""},{label:(0,l.__)("col","comet"),value:"col"},{label:(0,l.__)("row","comet"),value:"row"},{label:(0,l.__)("rowgroup","comet"),value:"rowgroup"},{label:(0,l.__)("colgroup","comet"),value:"colgroup"}],F=[{label:(0,l.__)("Top","comet"),value:"top"},{label:(0,l.__)("Bottom","comet"),value:"bottom"}],j={options:{}},G={getOptions:e=>({type:"GET_OPTIONS",path:e}),setOptions:e=>({type:"SET_OPTIONS",options:e})},R={getOptions(e){const{options:t}=e;return t}},D={GET_OPTIONS:e=>d()({path:e.path})},z={*getOptions(){const e=yield G.getOptions("/comet/v1/options");return G.setOptions(e)}},L=(0,m.createReduxStore)(H,{reducer:(e=j,t)=>"SET_OPTIONS"===t.type?{...e,options:t.options}:e,controls:D,selectors:R,resolvers:z,actions:G});(0,m.register)(L);const $={attributes:{head:[{cells:[{content:(0,l.__)("Version","flexible-table-block"),tag:"th"},{content:(0,l.__)("Jazz Musician","flexible-table-block"),tag:"th"},{content:(0,l.__)("Release Date","flexible-table-block"),tag:"th"}]}],body:[{cells:[{content:"5.9",tag:"td"},{content:"JosÃ©phine Baker",tag:"td"},{content:(0,l.__)("January 25, 2022","flexible-table-block"),tag:"td"}]},{cells:[{content:"5.8",tag:"td"},{content:"Art Tatum",tag:"td"},{content:(0,l.__)("July 20, 2021","flexible-table-block"),tag:"td"}]},{cells:[{content:"5.7",tag:"td"},{content:"Esperanza Spalding",tag:"td"},{content:(0,l.__)("March 9, 2021","flexible-table-block"),tag:"td"}]}]}},U=window.wp.element,q=(0,v.jsx)(h.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)(h.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v3.5h-15V5c0-.3.2-.5.5-.5zm8 5.5h6.5v3.5H13V10zm-1.5 3.5h-7V10h7v3.5zm-7 5.5v-4h7v4.5H5c-.3 0-.5-.2-.5-.5zm14.5.5h-6V15h6.5v4c0 .3-.2.5-.5.5z"})}),K=window.wp.notices;function J(e){return e?e.split(";").filter((e=>e.split(":")[0]&&e.split(":")[1])).map((e=>[e.split(":")[0].trim().replace(/-./g,(e=>e.substr(1).toUpperCase())),e.split(":")[1].trim()])).reduce(((e,t)=>({...e,[t[0]]:t[1]})),{}):{}}function W(e){return Object.keys(e).reduce(((t,n)=>{const o=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),l=e[n];return void 0===l||"string"!=typeof l&&0!==l||t.push(`${o}:${l};`),t}),[]).join("")}function Y(e,t){var n;const o=String(e).trim();let l=parseFloat(o);if(isNaN(l))return"";if(l<0)return"";if(0===l)return"0";t?.minNum&&(l=Math.max(t.minNum,l)),t?.maxNum&&(l=Math.min(t.maxNum,l));const c=10**(t?.precision||4);return l=Math.round(l*c)/c,`${l}${(null!==(n=o.match(/[\d.\-+]*\s*(.*)/)?.[1])&&void 0!==n?n:"").toLowerCase()}`}function Q(e,t=0){if(!e)return t;const n=parseInt(String(e),10);return isNaN(n)?t:n||t}function X(e){const t=parseInt(e,10);if(Number.isInteger(t))return t<0||1===t?void 0:t.toString()}function ee(e,{sectionName:t,rowIndex:n}){const o=e.body[0].cells.length,l=se(e),c={cells:Array.from({length:o}).map(((e,o)=>{const c=l.reduce(((e,t)=>e.concat(t.cells)),[]).filter((e=>e.sectionName===t&&e.rowIndex<n&&e.rowIndex+e.rowSpan-1>=n&&e.vColIndex<=o&&o<=e.vColIndex+e.colSpan-1));return{content:"",tag:"head"===t?"th":"td",rowSpan:1,colSpan:1,sectionName:t,rowIndex:n,vColIndex:o,isFirstSelected:!1,isHidden:!!c.length}}))};return{...e,[t]:[...e[t].slice(0,n),c,...e[t].slice(n).map((({cells:e})=>({cells:e.map((e=>({...e,rowIndex:e.rowIndex+1})))})))].map((({cells:e},o)=>({cells:e.map((e=>e.sectionName===t&&e.rowSpan>1&&o<=n&&o+e.rowSpan-1>=n?{...e,sectionName:t,rowIndex:o,rowSpan:e.rowSpan+1}:e))})))}}function te(e,{sectionName:t,rowIndex:n}){const o=e[t][n].cells.filter((e=>e.rowSpan>1)).length;if(o)for(let l=0;l<o;l++){const o=e[t].reduce(((e,t)=>e.concat(t.cells)),[]).filter((e=>e.rowSpan>1&&e.rowIndex===n));o.length&&(e=le(e,o[0]))}return{...e,[t]:e[t].reduce(((e,t,o)=>(o===n||e.push({cells:t.cells.map((e=>e.rowSpan>1&&o<n&&o+e.rowSpan-1>=n?{...e,rowSpan:e.rowSpan-1}:o>n?{...e,rowIndex:e.rowIndex-1}:e))}),e)),[])}}function ne(e,{vColIndex:t}){const n=e.body[0].cells.length===t,o=se(e);return Object.entries(e).reduce(((e,[l,c])=>c.length?(e[l]=c.map((({cells:e},c)=>({cells:e.reduce(((e,a,r)=>{if(a.colSpan>1&&r<t&&r+a.colSpan-1>=t)return e.push({...a,colSpan:a.colSpan+1}),e;if(n&&r+1===t)return e.push(a,{content:"",tag:"head"===l?"th":"td",rowSpan:1,colSpan:1,sectionName:a.sectionName,rowIndex:a.rowIndex,vColIndex:t+1,isHidden:!1}),e;if(r===t){const n=o.reduce(((e,t)=>e.concat(t.cells)),[]).filter((e=>e.sectionName===l&&e.colSpan>1&&e.rowIndex<=c&&e.rowIndex+e.rowSpan-1>=c&&e.vColIndex<t&&t<=e.vColIndex+e.colSpan-1));return e.push({content:"",tag:"head"===l?"th":"td",rowSpan:1,colSpan:1,sectionName:a.sectionName,rowIndex:a.rowIndex,vColIndex:t,isHidden:!!n.length},{...a,vColIndex:t+1}),e}return t<=r?(e.push({...a,vColIndex:r+1}),e):(e.push(a),e)}),[])}))),e):e),{head:[],body:[],foot:[]})}function oe(e,{vColIndex:t}){const n=se(e).reduce(((e,t)=>e.concat(t.cells)),[]).filter((e=>e.colSpan>1&&e.vColIndex===t));return n.length&&n.forEach((t=>e=le(e,t))),Object.entries(e).reduce(((e,[n,o])=>o.length?(e[n]=o.map((({cells:e})=>({cells:e.reduce(((e,n)=>n.vColIndex===t?e:n.colSpan>1&&n.vColIndex<t&&n.vColIndex+n.colSpan-1>=t?(e.push({...n,colSpan:n.colSpan-1}),e):n.vColIndex>t?(e.push({...n,vColIndex:n.vColIndex-1}),e):(e.push(n),e)),[])}))),e):e),{head:[],body:[],foot:[]})}function le(e,t){const{sectionName:n,rowIndex:o,vColIndex:l,rowSpan:c,colSpan:a}=t,r=e[n];if(r[o].cells[l]={...r[o].cells[l],rowSpan:1,colSpan:1},a>1)for(let e=1;e<a;e++)r[o].cells[l+e]={...r[o].cells[l],content:"",vColIndex:l+e,isHidden:!1};if(c>1)for(let e=1;e<c;e++)if(r[o+e].cells[l]={...r[o].cells[l],content:"",rowIndex:o+e,isHidden:!1},a>1)for(let t=1;t<a;t++)r[o+e].cells[l+t]={...r[o].cells[l],content:"",rowIndex:o+e,vColIndex:l+e,isHidden:!1};return{...e,[n]:r}}function ce(e){return!e||!e.length||e.every((({cells:e})=>!(e&&e.length)))}function ae(e){const{head:t,body:n,foot:o}=e,l={head:t,body:n,foot:o};return Object.entries(l).reduce(((e,[t,n])=>{if(!n.length)return e;const o=n.length,l=n[0].cells.reduce(((e,t)=>e+Q(t.colSpan,1)),0),c=Array.from({length:o}).map(((e,n)=>({cells:Array.from({length:l}).map(((e,o)=>({content:"",tag:"head"===t?"th":"td",rowSpan:1,colSpan:1,sectionName:t,isHidden:!1,isFilled:!1,rowIndex:n,vColIndex:o})))})));return n.forEach(((e,n)=>{e.cells.forEach((e=>{const o=c[n].cells.findIndex((({isFilled:e})=>!e)),l=Q(e.rowSpan,1),a=Q(e.colSpan,1);if(c[n].cells[o]={...e,isFilled:!0,sectionName:t,rowSpan:l,colSpan:a,rowIndex:n,vColIndex:o,isHidden:!1},a>1)for(let e=1;e<a;e++)c[n].cells[o+e].isFilled=!0,c[n].cells[o+e].isHidden=!0;if(l>1)for(let e=1;e<l;e++)if(c[n+e].cells[o].isFilled=!0,c[n+e].cells[o].isHidden=!0,a>1)for(let t=1;t<a;t++)c[n+e].cells[o+t].isFilled=!0,c[n+e].cells[o+t].isHidden=!0}))})),e[t]=c,e}),{head:[],body:[],foot:[]})}function re(e){return Object.entries(e).reduce(((e,[t,n])=>n.length?(e[t]=n.map((({cells:e})=>({cells:e.filter((e=>!e.isHidden)).map((e=>({content:e.content,styles:e.styles,tag:e.tag,className:e.className,id:e.id,headers:e.headers,scope:e.scope,rowSpan:e.rowSpan>1?String(e.rowSpan):void 0,colSpan:e.colSpan>1?String(e.colSpan):void 0})))}))),e):e),{head:[],body:[],foot:[]})}function se(e){return Object.keys(e).reduce(((t,n)=>(ce(e[n])||t.push(...e[n]),t)),[])}function ie(e){return e.reduce((({minRowIndex:e,maxRowIndex:t,minColIndex:n,maxColIndex:o},l)=>{const c=l.rowSpan>1?l.rowIndex+l.rowSpan-1:l.rowIndex,a=l.colSpan>1?l.vColIndex+l.colSpan-1:l.vColIndex;return{minRowIndex:e<l.rowIndex?e:l.rowIndex,maxRowIndex:t>c?t:c,minColIndex:n<l.vColIndex?n:l.vColIndex,maxColIndex:o>a?o:a}}),{minRowIndex:e[0].rowIndex,maxRowIndex:e[0].rowIndex,minColIndex:e[0].vColIndex,maxColIndex:e[0].vColIndex})}function de(e){if(!e)return!1;if(e.length<=1)return!1;if(function(e){return e.reduce(((e,t)=>(e.includes(t.sectionName)||e.push(t.sectionName),e)),[]).length>1}(e))return!1;const t=ie(e),n=[];for(let e=t.minRowIndex;e<=t.maxRowIndex;e++){n[e]=[];for(let o=t.minColIndex;o<=t.maxColIndex;o++)n[e][o]=!1}return e.forEach((e=>{if(e.rowIndex in n&&e.vColIndex in n[e.rowIndex]){if(n[e.rowIndex][e.vColIndex]=!0,e.colSpan>1)for(let t=1;t<e.colSpan;t++)n[e.rowIndex][e.vColIndex+t]=!0;if(e.rowSpan>1)for(let t=1;t<e.rowSpan;t++)if(n[e.rowIndex+t][e.vColIndex]=!0,e.colSpan>1)for(let o=1;o<e.colSpan;o++)n[e.rowIndex+t][e.vColIndex+o]=!0}})),n.reduce(((e,t)=>e.concat(t)),[]).every((e=>e))}function me(e){return!!e&&e.some((({rowSpan:e,colSpan:t})=>e>1||t>1))}function he(e,t){if(!ce(e[t]))return{...e,[t]:[]};const n=e.body[0].cells.length,o={cells:Array.from({length:n}).map(((e,n)=>({content:"",tag:"head"===t?"th":"td",rowSpan:1,colSpan:1,sectionName:t,rowIndex:0,vColIndex:n,isHidden:!1,isFirstSelected:!1})))};return{...e,[t]:[o]}}function ve({attributes:e,setAttributes:t,vTable:n,setSelectedCells:c,setSelectedLine:a}){const{isStackedOnMobile:r,sticky:s,head:i,foot:d}=e;return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(w.ToggleControl,{label:(0,l.__)("Header section (<thead>)","comet"),checked:!(!i||!i.length),onChange:()=>{const e=he(n,"head");t(re(e)),c(void 0),a(void 0)},__nextHasNoMarginBottom:!0}),(0,o.createElement)(w.ToggleControl,{label:(0,l.__)("Footer section (<tfoot>)","comet"),checked:!(!d||!d.length),onChange:()=>{const e=he(n,"foot");t(re(e)),c(void 0),a(void 0)},__nextHasNoMarginBottom:!0}),(0,o.createElement)(w.ToggleControl,{label:(0,l.__)("Stack when adapting to a narrow container or viewport","comet"),className:"ftb-toggle-control",checked:r,onChange:()=>{t({isStackedOnMobile:!r})},__nextHasNoMarginBottom:!0}),(0,o.createElement)(w.SelectControl,{label:(0,l.__)("Fixed headers","comet"),value:s,options:P.map((({label:e,value:t})=>({label:e,value:t}))),onChange:e=>{var n;n=e,(!e||P.some((e=>e.value===n)))&&t({sticky:"none"===e?void 0:e})},size:"__unstable-large",__nextHasNoMarginBottom:!0}))}function ue({attributes:e,setAttributes:t}){var n;const{captionStyles:c}=e;return(0,o.createElement)(w.Flex,{wrap:!1,align:"flex-start"},(0,o.createElement)(w.__experimentalToggleGroupControl,{label:(0,l.__)("Position","comet"),value:null!==(n=c?.captionSide)&&void 0!==n?n:"bottom",onChange:n=>{var o;o=n,F.some((e=>e.value===o))&&t({...e,captionStyles:{...c,captionSide:n}})},isBlock:!0},F.map((({label:e,value:t})=>(0,o.createElement)(w.__experimentalToggleGroupControlOption,{key:t,value:t,label:e})))),(0,o.createElement)(w.__experimentalToggleGroupControl,{label:(0,l.__)("Text alignment","comet"),value:c?.textAlign,isDeselectable:!0,onChange:n=>{var o;o=n,(!n||B.some((e=>e.value===o)))&&t({...e,captionStyles:{...c,textAlign:n===c?.textAlign?void 0:n}})},isBlock:!0},B.map((({icon:e,label:t,value:n})=>(0,o.createElement)(w.__experimentalToggleGroupControlOptionIcon,{key:n,value:n,icon:e,label:t})))))}function pe(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(n=pe(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}const xe=function(){for(var e,t,n=0,o="",l=arguments.length;n<l;n++)(e=arguments[n])&&(t=pe(e))&&(o&&(o+=" "),o+=t);return o};function we({label:e,value:t,isNone:n,isTransparent:c,isMixed:a=!1,onClick:r}){return(0,o.createElement)(w.Button,{label:e,className:xe("ftb-color-indicator-button",{"is-none":n,"is-mixed":a,"is-transparent":c}),onClick:r},a?(0,l.__)("Mixed","comet"):(0,o.createElement)(w.ColorIndicator,{colorValue:t||""}))}function ge({label:e=(0,l.__)("Color","comet"),help:t,onChange:n,colors:c=[],value:r}){const i=`${(0,s.useInstanceId)(ge,"ftb-color-control")}-heading`,d=(0,m.useSelect)((e=>{var t;const n=e(a.store).getSettings();return null!==(t=n?.colors)&&void 0!==t?t:[]}),[]),[h,v]=(0,U.useState)(!1);return(0,o.createElement)(w.BaseControl,{className:"ftb-color-control",help:t,__nextHasNoMarginBottom:!0},(0,o.createElement)(w.__experimentalVStack,{"aria-labelledby":i,role:"group"},(0,o.createElement)(w.Flex,null,(0,o.createElement)(w.__experimentalText,{id:i,upperCase:!0,size:"11",weight:"500",as:w.FlexBlock},e),(0,o.createElement)(w.FlexItem,null,(0,o.createElement)(w.Button,{variant:"secondary",onClick:()=>n(void 0),size:"small"},(0,l.__)("Reset","comet")))),(0,o.createElement)(we,{label:(0,l.__)("Color","comet"),value:r,onClick:()=>v(!0),isNone:!r,isTransparent:"transparent"===r})),h&&(0,o.createElement)(w.Popover,{placement:"left-start",shift:!0,offset:36,onClose:()=>v(!1)},(0,o.createElement)(w.__experimentalSpacer,{padding:4,marginBottom:0},(0,o.createElement)(w.ColorPalette,{colors:[...d,...c],value:r||"",onChange:e=>n(e)}))))}function be({setAttributes:e,vTable:t,selectedCells:n=[]}){const c=(0,w.__experimentalUseCustomUnits)({availableUnits:Z});if(!n.length)return null;const{sectionName:a,rowIndex:r,vColIndex:s}=n[0],i=t[a][r].cells[s];if(!i)return null;const d=n.reduce(((e,n)=>{const{tag:o}=t[n.sectionName][n.rowIndex].cells[n.vColIndex];return e.includes(o)||e.push(o),e}),[]),m=J(i.styles),h=o=>{const l=function(e,t,n){return Object.entries(e).reduce(((e,[o,l])=>l.length?(e[o]=l.map((({cells:e},l)=>({cells:e.map(((e,c)=>{if(!n.some((e=>e.sectionName===o&&e.rowIndex===l&&e.vColIndex===c)))return e;let a=J(e?.styles);return t.styles&&(a={...a,...t.styles}),{...e,styles:W(a),tag:t.tag||e.tag,className:"className"in t?t.className:e.className,id:"id"in t?t.id:e.id,headers:"headers"in t?t.headers:e.headers,scope:"scope"in t?t.scope:e.scope}}),[])}))),e):e),{head:[],body:[],foot:[]})}(t,o,n);e(re(l))};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(w.__experimentalToggleGroupControl,{label:(0,l.__)("Cell type","comet"),value:i.tag,isBlock:!0,onChange:e=>{var t;t=e,O.some((e=>e.value===t))&&h({tag:e,id:void 0,headers:void 0,scope:void 0})}},O.map((({label:e,value:t})=>(0,o.createElement)(w.__experimentalToggleGroupControlOption,{key:t,value:t,label:e})))),1===d.length&&(0,o.createElement)(o.Fragment,null,d.includes("th")&&(0,o.createElement)(w.SelectControl,{label:(0,l.__)("Scope","comet"),value:i.scope,options:A.map((({label:e,value:t})=>({label:e,value:t}))),onChange:e=>{h({scope:e===i.scope?void 0:e})},help:"Does this label its row or column?",__next40pxDefaultSize:!0}),d.includes("th")&&(0,o.createElement)(w.__experimentalUnitControl,{label:(0,l.__)("Column width","comet"),value:m?.width,units:c,min:0,onChange:e=>{h({styles:{width:Y(e)}})},__next40pxDefaultSize:!0}),d.includes("th")&&(0,o.createElement)(w.TextControl,{label:(0,l.__)("Unique ID","comet"),autoComplete:"off",value:i.id||"",onChange:e=>{h({id:""!==e?e:void 0})},help:"No spaces; must start with a letter",__next40pxDefaultSize:!0}),d.includes("td")&&(0,o.createElement)(w.TextControl,{label:(0,U.createInterpolateElement)((0,l.__)("<code>headers</code> attribute","comet"),{code:(0,o.createElement)("code",null)}),autoComplete:"off",value:i.headers||"",onChange:e=>{h({headers:""!==e?e:void 0})},help:"Unique ID of a header cell to associate with this cell"})),(0,o.createElement)("hr",null),(0,o.createElement)(w.BaseControl,{id:"comet-cell-text-align"},(0,o.createElement)("div",{"aria-labelledby":"comet-cell-text-align-heading",role:"group"},(0,o.createElement)(w.Flex,{style:{marginBottom:"-16px"},justify:"start",align:"start"},(0,o.createElement)(w.__experimentalToggleGroupControl,{label:(0,l.__)("Text alignment","comet"),value:m?.textAlign,isDeselectable:!0,onChange:e=>{h({styles:{textAlign:e===m.textAlign?void 0:e}})}},B.map((({icon:e,label:t,value:n})=>(0,o.createElement)(w.__experimentalToggleGroupControlOptionIcon,{key:n,value:n,icon:e,label:t})))),(0,o.createElement)(w.__experimentalToggleGroupControl,{label:(0,l.__)("Vertical alignment","comet"),value:m?.verticalAlign,isDeselectable:!0,onChange:e=>{h({styles:{verticalAlign:e===m.verticalAlign?void 0:e}})}},T.map((({icon:e,label:t,value:n})=>(0,o.createElement)(w.__experimentalToggleGroupControlOptionIcon,{key:n,value:n,icon:e,label:t}))))))),(0,o.createElement)("hr",null),(0,o.createElement)(ge,{label:(0,l.__)("Cell background","comet"),value:m.backgroundColor,onChange:e=>{h({styles:{backgroundColor:e}})}}),(0,o.createElement)(w.TextControl,{label:(0,l.__)("Cell CSS class(es)","comet"),autoComplete:"off",value:i.className||"",onChange:e=>{h({className:""!==e?e:void 0})},help:(0,l.__)("Separate multiple classes with spaces.","comet")}))}const fe=(0,v.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,v.jsx)(h.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),_e=(0,v.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,v.jsx)(h.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})}),Se=(0,v.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,v.jsx)(h.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),Ce=(0,v.jsx)(h.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)(h.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),Ie=(0,v.jsx)(h.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)(h.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 5.5h12a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5ZM4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6Zm4 10h2v-1.5H8V16Zm5 0h-2v-1.5h2V16Zm1 0h2v-1.5h-2V16Z"})});function Ee({attributes:e,setAttributes:t,isSelected:n,onFocus:c}){const{caption:r="",captionStyles:i}=e,d=(0,s.usePrevious)(r),m=a.RichText.isEmpty(r),h=a.RichText.isEmpty(d||""),[v,u]=(0,U.useState)(!m),p=e=>t({caption:e});(0,U.useEffect)((()=>{!m&&h&&u(!0)}),[m,h]),(0,U.useEffect)((()=>{!n&&m&&u(!1)}),[n,m]);const x=(0,U.useCallback)((e=>{e&&m&&e?.focus()}),[m]);return(0,o.createElement)(o.Fragment,null,n&&(0,o.createElement)(a.BlockControls,{group:"block"},(0,o.createElement)(w.ToolbarButton,{onClick:()=>{u(!v),v&&r&&p(void 0)},icon:Ie,isPressed:v,label:v?(0,l.__)("Remove caption","comet"):(0,l.__)("Add caption","comet")})),v&&(!a.RichText.isEmpty(r)||n)&&(0,o.createElement)(a.RichText,{"aria-label":(0,l.__)("Table caption text","comet"),placeholder:(0,l.__)("Add caption","comet"),tagName:"caption",style:i,value:r,ref:x,onChange:p,onFocus:c}))}function ye(e){const{name:t,...n}=e,l=`t${t}`;return(0,o.createElement)(l,{...n})}function ke(e){const{name:t,...n}=e,l=t;return(0,o.createElement)(l,{...n})}function Me({attributes:e,setAttributes:t,isSelected:n,vTable:c,selectedCells:r,setSelectedCells:s,selectedLine:i,setSelectedLine:d,isContentOnlyMode:h}){const[v,u]=(0,U.useState)(!1),[p,x]=(0,U.useState)(!1);(0,U.useEffect)((()=>x(!0)),[]);const g=(0,U.useRef)(null),{createWarningNotice:b}=(0,m.useDispatch)(K.store);let f=!1;const _=i&&"sectionName"in i&&"rowIndex"in i,S=i&&"vColIndex"in i,C=(e,n)=>{const o=ee(c,{sectionName:e,rowIndex:n});t(re(o)),s(void 0),d(void 0)},I=(e,n)=>{const o=0===n?e.vColIndex:e.vColIndex+n+e.colSpan-1,l=ne(c,{vColIndex:o});t(re(l)),s(void 0),d(void 0)},E=Object.keys(c).reduce(((e,t)=>ce(c[t])?e:{...e,[t]:c[t].map((e=>({cells:e.cells.filter((e=>!e.isHidden))})))}),{});if(!E)return null;const y={attributes:e,setAttributes:t,isSelected:n,onFocus:()=>{d(void 0),s(void 0)}},k=Object.keys(E);return(0,o.createElement)("table",{ref:g,onKeyDown:e=>{const{key:t}=e;if("Shift"===t||"Control"===t||"Meta"===t)u(!0);else if("Tab"===t&&g.current){if(null===e.target.closest(".wp-block-comet-table"))return;f=!0;const t=g.current,{ownerDocument:n}=t,{activeElement:o}=n,l=t.querySelector('th.is-selected > [contenteditable="true"], td.is-selected > [contenteditable="true"]'),c=o&&null!==o.closest(".components-popover"),a=!!n.querySelector(".block-editor-link-control");if(!l||c||a)return;const r=t.querySelectorAll('th > [contenteditable="true"], td > [contenteditable="true"]'),s=[].slice.call(r),i=s.findIndex((e=>e===l));if(-1===i)return;let d=e.shiftKey?i-1:i+1;d<0?d=s.length-1:d>=s.length&&(d=0);const m=s[d];if(!m)return;e.preventDefault(),u(!1),m.focus();const h=n.getSelection(),v=n.createRange();h&&m.innerText.trim().length&&(v.selectNodeContents(m),h.removeAllRanges(),h.addRange(v))}},onKeyUp:e=>{const{key:t}=e;if("Shift"===t||"Control"===t||"Meta"===t){if(null===e.target.closest(".wp-block-comet-table"))return;u(!1)}}},(0,o.createElement)(Ee,{...y}),k.map(((e,m)=>(0,o.createElement)(ye,{name:e,key:m},E[e].map(((u,x)=>(0,o.createElement)("tr",{key:x},u.cells.map((u=>{const{content:g,tag:y,className:k,id:M,headers:N,scope:H,styles:Z,rowSpan:B,colSpan:T,vColIndex:P}=u,O=(r||[]).some((t=>t.sectionName===e&&t.rowIndex===x&&t.vColIndex===P)),A=J(Z);return(0,o.createElement)(ke,{key:P,name:y,className:xe(k,{"is-selected":O}),rowSpan:B>1?B:void 0,colSpan:T>1?T:void 0,style:A,id:M,headers:N,scope:H,onClick:e=>((e,t)=>{const{shiftKey:n,ctrlKey:o,metaKey:a}=e;if(null===e.target.closest(".wp-block-comet-table"))return;const{sectionName:i,rowIndex:d,vColIndex:m}=t;if(n)if(r){const e=r.find((({isFirstSelected:e})=>e));if(!e)return;if(e.sectionName!==i)return void b((0,l.__)("Cannot select range cells from different sections.","comet"),{id:"comet-range-sections",type:"snackbar"});s(function(e,{fromCell:t,toCell:n}){if(!t||!n)return[];if(t.sectionName!==n.sectionName)return[];const o=ie([t,n]);let l=!1,{minRowIndex:c,maxRowIndex:a,minColIndex:r,maxColIndex:s}=o;const i=e[t.sectionName],d=i.length,m=i[0].cells.length,h=i.reduce(((e,t)=>e.concat(t.cells)),[]).map((e=>(e.rowIndex===t.rowIndex&&e.vColIndex===t.vColIndex&&(e.isFirstSelected=!0),e))).filter((e=>!e.isHidden));for(;!l;){const e=h.filter((e=>(e.vColIndex+e.colSpan-1>=r&&e.vColIndex+e.colSpan-1<=s||e.vColIndex>=r&&e.vColIndex<=s)&&e.rowIndex<c&&e.rowIndex+e.rowSpan-1>=c&&e.rowSpan>1)),t=0===c||!e.length;t||c--;const n=h.filter((e=>(e.rowIndex+e.rowSpan-1>=c&&e.rowIndex+e.rowSpan-1<=a||e.rowIndex>=c&&e.rowIndex<=a)&&e.vColIndex<=s&&e.vColIndex+e.colSpan-1>s&&e.colSpan>1)),o=s===m-1||!n.length;o||s++;const i=h.filter((e=>(e.vColIndex+e.colSpan-1>=r&&e.vColIndex+e.colSpan-1<=s||e.vColIndex>=r&&e.vColIndex<=s)&&e.rowIndex<=a&&e.rowIndex+e.rowSpan-1>a&&e.rowSpan-1)),v=a===d-1||!i.length;v||a++;const u=h.filter((e=>(e.rowIndex+e.rowSpan-1>=c&&e.rowIndex+e.rowSpan-1<=a||e.rowIndex>=c&&e.rowIndex<=a)&&e.vColIndex<r&&e.vColIndex+e.colSpan-1>=r&&e.colSpan>1)),p=s===m-1||!u.length;p||r--,l=t&&o&&v&&p}return h.filter((e=>e.rowIndex>=c&&e.rowIndex<=a&&e.vColIndex>=r&&e.vColIndex<=s))}(c,{fromCell:e,toCell:t}))}else s([{...t,isFirstSelected:!0}]);else if(o||a){const e=r?[...r]:[],n=e.findIndex((e=>e.sectionName===i&&e.rowIndex===d&&e.vColIndex===m));if(e.length&&i!==e[0].sectionName)return void b((0,l.__)("Cannot select multi cells from difference sections.","comet"),{id:"comet-multi-sections",type:"snackbar"});-1===n?e.push(t):e.splice(n,1),s(e)}else s([{...t,isFirstSelected:!0}])})(e,u)},n&&!h&&0===x&&0===P&&(0,o.createElement)(w.Button,{className:"ftb-table-cell-label",tabIndex:0,variant:"primary",onClick:t=>{(e=>{s(c[e].reduce(((e,t)=>e.concat(t.cells.filter((e=>!e.isHidden)))),[])),d(void 0)})(e),t.stopPropagation()}},`t${e}`),n&&!h&&(0,o.createElement)(o.Fragment,null,0===x&&0===P&&(0,o.createElement)(w.Button,{className:xe("ftb-row-before-inserter",{"ftb-row-before-inserter--has-prev-section":m>0}),label:(0,l.__)("Insert row before","comet"),tabIndex:0,icon:fe,iconSize:18,onClick:t=>{C(e,x),t.stopPropagation()}}),0===P&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(w.Button,{className:"ftb-row-selector",label:(0,l.__)("Select row","comet"),tabIndex:0,icon:_e,iconSize:16,variant:_&&i.sectionName===e&&i.rowIndex===x?"primary":void 0,onClick:t=>{((e,t)=>{_&&i.sectionName===e&&i.rowIndex===t?(d(void 0),s(void 0)):(d({sectionName:e,rowIndex:t}),s(c[e].reduce(((e,n)=>e.concat(n.cells.filter((e=>e.rowIndex===t&&!e.isHidden)))),[])))})(e,x),t.stopPropagation()}}),_&&i.sectionName===e&&i.rowIndex===x&&(0,o.createElement)(w.Button,{className:"ftb-row-deleter",label:(0,l.__)("Delete row","comet"),tabIndex:0,icon:Se,iconSize:20,onClick:n=>{((e,n)=>{if(!("body"!==e||1!==c.body.length||ce(c.head)&&ce(c.foot)))return void b((0,l.__)("The table body must have one or more rows.","comet"),{id:"comet-body-row",type:"snackbar"});const o=te(c,{sectionName:e,rowIndex:n});t(re(o)),s(void 0),d(void 0)})(e,x),n.stopPropagation()}})),0===m&&0===x&&0===P&&(0,o.createElement)(w.Button,{className:"ftb-column-before-inserter",label:(0,l.__)("Insert column before","comet"),tabIndex:0,icon:fe,iconSize:18,onClick:e=>{I(u,0),e.stopPropagation()}}),0===m&&0===x&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(w.Button,{className:"ftb-column-selector",label:(0,l.__)("Select column","comet"),tabIndex:0,icon:Ce,iconSize:18,variant:S&&i.vColIndex===P?"primary":void 0,onClick:e=>{(e=>{if(S&&i.vColIndex&&i.vColIndex===e)d(void 0),s(void 0);else{const t=se(c);s(t.reduce(((t,n)=>t.concat(n.cells.filter((t=>t.vColIndex===e&&!t.isHidden)))),[])),d({vColIndex:e})}})(P),e.stopPropagation()}}),S&&i.vColIndex===P&&(0,o.createElement)(w.Button,{className:"ftb-column-deleter",label:(0,l.__)("Delete column","comet"),tabIndex:0,icon:Se,iconSize:20,onClick:e=>{(e=>{const n=oe(c,{vColIndex:e});t(re(n)),s(void 0),d(void 0)})(P),e.stopPropagation()}})),0===P&&(0,o.createElement)(w.Button,{className:xe("ftb-row-after-inserter",{"ftb-row-after-inserter--has-next-section":m<Object.keys(E).length-1&&x+B-1==E[e].length-1}),label:(0,l.__)("Insert row after","comet"),tabIndex:0,icon:fe,iconSize:18,onClick:t=>{C(e,x+B),t.stopPropagation()}})),(0,o.createElement)(a.RichText,{key:P,value:g,onChange:e=>((e,n)=>{if(!p)return;const{sectionName:o,rowIndex:l,vColIndex:a}=n;s([{...n,isFirstSelected:!0}]);const r={...c,[o]:c[o].map(((t,n)=>n!==l?{cells:t.cells.filter((e=>!e.isHidden))}:{cells:t.cells.map(((t,o)=>n!==l||o!==a?t:{...t,content:e}))}))};t(re(r))})(e,u),...(!v||f)&&{onFocus:()=>{f=!1,d(void 0),s([{...u,isFirstSelected:!0}])}},"aria-label":V[e]}),n&&!h&&0===m&&0===x&&(0,o.createElement)(w.Button,{className:"ftb-column-after-inserter",label:(0,l.__)("Insert column after","comet"),tabIndex:0,icon:fe,iconSize:18,onClick:e=>{I(u,1),e.stopPropagation()}}))})))))))))}const Ne=window.wp.keycodes;function He({setAttributes:e}){const[t,n]=(0,U.useState)(3),[c,r]=(0,U.useState)(3),[s,i]=(0,U.useState)(!1),[d,m]=(0,U.useState)(!1),h=t?t+Number(s)+Number(d):void 0,v=h?Number(150/Math.min(10,h)):void 0,u=xe("ftb-placeholder__table",{"is-overflow-row":h&&h>10,"is-overflow-col":c&&c>10});return(0,o.createElement)(w.Placeholder,{label:(0,l.__)("Flexible Table","flexible-table-block"),className:"ftb-placeholder",icon:(0,o.createElement)(a.BlockIcon,{icon:g,showColors:!0})},(0,o.createElement)("div",{className:"components-placeholder__instructions"},(0,U.createInterpolateElement)((0,Ne.isAppleOS)()?(0,l.__)("Hint: Hold <code>Command</code> key to select multiple cells. Hold <code>Shift</code> key to select the range.","flexible-table-block"):(0,l.__)("Hint: Hold <code>Ctrl</code> key to select multiple cells. Hold <code>Shift</code> key to select the range.","flexible-table-block"),{code:(0,o.createElement)("code",null)})),(0,o.createElement)(w.__experimentalSpacer,{as:w.__experimentalVStack,className:"ftb-placeholder__table-wrap",style:{minHeight:150},alignment:"center",padding:4,marginBottom:0},(0,o.createElement)(w.__experimentalText,{align:"center",isBlock:!0,weight:"500"},(0,l.__)("Preview","flexible-table-block")),t&&c&&(0,o.createElement)("table",{className:u},s&&(0,o.createElement)("thead",null,(0,o.createElement)("tr",null,Array.from({length:Math.min(c,10)}).map(((e,t)=>(0,o.createElement)("th",{key:t,style:{height:v}}))))),(0,o.createElement)("tbody",null,Array.from({length:Math.min(t,10)}).map(((e,t)=>(0,o.createElement)("tr",{key:t},Array.from({length:Math.min(c,10)}).map(((e,t)=>(0,o.createElement)("td",{key:t,style:{height:v}}))))))),d&&(0,o.createElement)("tfoot",null,(0,o.createElement)("tr",null,Array.from({length:Math.min(c,10)}).map(((e,t)=>(0,o.createElement)("td",{key:t,style:{height:v}}))))))),(0,o.createElement)(w.__experimentalVStack,{as:"form",onSubmit:n=>{if(n.preventDefault(),!t||!c)return;const o=function({rowCount:e,colCount:t,headerSection:n,footerSection:o}){const l=(e,t,n)=>Array.from({length:e}).map(((e,o)=>({cells:Array.from({length:t}).map(((e,t)=>({content:"",tag:"head"===n?"th":"td",rowSpan:1,colSpan:1,sectionName:n,rowIndex:o,vColIndex:t,isFirstSelected:!1,isHidden:!1})))})));return{head:l(Number(n),t,"head"),body:l(e,t,"body"),foot:l(Number(o),t,"foot")}}({rowCount:Math.min(t,50),colCount:Math.min(c,50),headerSection:s,footerSection:d});e(re(o))}},(0,o.createElement)(w.__experimentalHStack,{wrap:!0,justify:"start"},(0,o.createElement)(w.ToggleControl,{label:(0,l.__)("Header section","flexible-table-block"),checked:!!s,onChange:e=>i(e),__nextHasNoMarginBottom:!0}),(0,o.createElement)(w.ToggleControl,{label:(0,l.__)("Footer section","flexible-table-block"),checked:!!d,onChange:e=>m(e),__nextHasNoMarginBottom:!0})),(0,o.createElement)(w.__experimentalHStack,{wrap:!0,alignment:"end",justify:"start"},(0,o.createElement)(w.TextControl,{label:(0,l.__)("Column count","flexible-table-block"),className:"ftb-placeholder__input",type:"number",min:"1",max:50,value:c||"",onChange:e=>{const t=parseInt(e,10);isNaN(t)?r(void 0):r(Math.max(1,Math.min(50,t)))},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,o.createElement)(w.TextControl,{label:(0,l.__)("Row count","flexible-table-block"),className:"ftb-placeholder__input",type:"number",min:"1",max:50,value:t||"",onChange:e=>{const t=parseInt(e);isNaN(t)?n(void 0):n(Math.max(1,Math.min(50,t)))},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,o.createElement)(w.Button,{variant:"primary",type:"submit",disabled:!t||!c,__next40pxDefaultSize:!0},(0,l.__)("Create Table","flexible-table-block")))))}const Ze={from:[{type:"block",blocks:["core/table"],transform:e=>{const{hasFixedLayout:t,head:n,body:o,foot:l,caption:a,style:r}=e,s=e=>e.length?e.map((e=>e.cells.length?{cells:e.cells.map((e=>{const{content:t,tag:n,colspan:o,rowspan:l}=e;return{content:t,tag:n,colSpan:X(o),rowSpan:X(l)}}))}:e)):e;return(0,c.createBlock)("comet/table",{head:s(n),body:s(o),foot:s(l),hasFixedLayout:t,caption:a,style:r})}}],to:[{type:"block",blocks:["core/table"],transform:e=>{const{getBlockType:t}=(0,m.select)(c.store),n=t("core/table"),o=!!n.attributes.head.query.cells.query.rowspan&&!!n.attributes.head.query.cells.query.colspan;let l=ae(e);const a=se(l).reduce(((e,t)=>e.concat(t.cells)),[]).filter((({rowSpan:e,colSpan:t})=>e>1||t>1));a.length&&!o&&a.forEach((e=>{l=le(l,e)}));const r=Object.entries(l).reduce(((e,[t,n])=>{if(!n.length)return e;const l=n.map((({cells:e})=>({cells:e.filter((e=>!e.isHidden)).map((e=>({content:e.content,tag:"head"===e.sectionName?"th":"td",rowspan:o?X(e.rowSpan):void 0,colspan:o?X(e.colSpan):void 0})))})));return e[t]=l,e}),{});return(0,c.createBlock)("core/table",{...r,caption:e.caption})}}]},Ve={title:(0,l.__)("Table","comet"),category:"text",description:(0,l.__)("Create structured content in rows and columns to display tabular data.","comet"),icon:g,example:$,transforms:Ze,edit:function(e){const{attributes:t,setAttributes:n,isSelected:c}=e,[r,s]=(0,U.useState)(void 0),[i,d]=(0,U.useState)(void 0),h=(0,m.useSelect)((e=>{const{getOptions:t}=e(H);return t()}),[]),{createWarningNotice:v}=(0,m.useDispatch)(K.store),u="contentOnly"===(0,a.useBlockEditingMode)();(0,U.useEffect)((()=>{c||(s(void 0),d(void 0))}),[c]);const p=ae(t),x=e=>{if(!r||1!==r.length)return;const{sectionName:t,rowIndex:o,rowSpan:l}=r[0],c=ee(p,{sectionName:t,rowIndex:0===e?o:o+e+l-1});n(re(c)),s(void 0),d(void 0)},g=e=>{if(!r||1!==r.length)return;const{vColIndex:t,colSpan:o}=r[0],l=ne(p,{vColIndex:0===e?t:t+e+o-1});n(re(l)),s(void 0),d(void 0)},b=[{icon:S,title:(0,l.__)("Insert row before","comet"),isDisabled:1!==(r||[]).length,onClick:()=>x(0)},{icon:C,title:(0,l.__)("Insert row after","comet"),isDisabled:1!==(r||[]).length,onClick:()=>x(1)},{icon:y,title:(0,l.__)("Delete row","comet"),isDisabled:1!==(r||[]).length,onClick:()=>(()=>{if(!r||1!==r.length)return;const{sectionName:e,rowIndex:t}=r[0];if(!("body"!==e||1!==p.body.length||ce(p.head)&&ce(p.foot)))return void v((0,l.__)("The table body must have one or more rows.","comet"),{id:"comet-body-row",type:"snackbar"});const o=te(p,{sectionName:e,rowIndex:t});n(re(o)),s(void 0),d(void 0)})()},{icon:I,title:(0,l.__)("Insert column before","comet"),isDisabled:1!==(r||[]).length,onClick:()=>g(0)},{icon:E,title:(0,l.__)("Insert column after","comet"),isDisabled:1!==(r||[]).length,onClick:()=>g(1)},{icon:k,title:(0,l.__)("Delete column","comet"),isDisabled:1!==(r||[]).length,onClick:()=>(()=>{if(!r||1!==r.length)return;const{vColIndex:e}=r[0],t=oe(p,{vColIndex:e});n(re(t)),s(void 0),d(void 0)})()},{icon:N,title:(0,l.__)("Split merged cells","comet"),isDisabled:!r||!me(r),onClick:()=>(()=>{const e=function(e,t){if(!t)return e;const n=t.filter((({rowSpan:e,colSpan:t})=>e>1||t>1));return n.length&&n.forEach((t=>{e=le(e,t)})),e}(p,r);n(re(e)),s(void 0),d(void 0)})()},{icon:M,title:(0,l.__)("Merge cells","comet"),isDisabled:!r||!de(r),onClick:()=>(()=>{const e=function(e,t){if(!t||!t.length)return e;const n=t[0].sectionName,o=ie(t),{minRowIndex:l,maxRowIndex:c,minColIndex:a,maxColIndex:r}=o,s=t.filter((({rowSpan:e,colSpan:t})=>e>1||t>1)).length;if(s)for(let t=0;t<s;t++){const t=e[n].reduce(((e,t)=>e.concat(t.cells)),[]).filter((e=>(e.rowSpan>1||e.colSpan>1)&&l<=e.rowIndex&&c>=e.rowIndex&&a<=e.vColIndex&&r>=e.vColIndex));t.length&&(e=le(e,t[0]))}const i=e[n].reduce(((e,t)=>e.concat(t.cells)),[]).reduce(((e,t)=>(t.rowIndex>=l&&t.rowIndex<=c&&t.vColIndex>=a&&t.vColIndex<=r&&t.content&&e.push(t.content),e)),[]).join("<br>");return{...e,[n]:e[n].map(((e,t)=>t<l||t>c?e:{cells:e.cells.map(((e,n)=>n===a&&t===l?{...e,rowSpan:Math.abs(c-l)+1,colSpan:Math.abs(r-a)+1,content:i}:t>=l&&t<=c&&n>=a&&n<=r?{...e,isHidden:!0}:e))}))}}(p,r);n(re(e)),s(void 0),d(void 0)})()}],f=!["head","body","foot"].filter((e=>!ce(p[e]))).length,_=(0,a.useBlockProps)({}),Z=(0,a.useBlockProps)({}),V={attributes:t,setAttributes:n,isSelected:c,options:h,vTable:p,selectedCells:r,setSelectedCells:s,selectedLine:i,setSelectedLine:d,isContentOnlyMode:u},B={attributes:t,setAttributes:n,vTable:p,setSelectedCells:s,setSelectedLine:d},T={setAttributes:n,vTable:p,selectedCells:r},P=r&&r.length>1?(0,l.__)("Selected cells","comet"):(0,l.__)("Selected cell","comet"),O={attributes:t,setAttributes:n};return(0,o.createElement)(o.Fragment,null,f&&(0,o.createElement)("div",{..._},(0,o.createElement)(He,{...e})),!f&&(0,o.createElement)("div",{...Z},!u&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(a.BlockControls,{group:"block"},(0,o.createElement)(w.ToolbarDropdownMenu,{label:(0,l.__)("Edit table","comet"),icon:q,controls:b}))),(0,o.createElement)(a.InspectorControls,null,(0,o.createElement)(w.PanelBody,{title:(0,l.__)("Table layout","comet"),initialOpen:!1},(0,o.createElement)(ve,{...B})),(0,o.createElement)(w.PanelBody,{title:(0,l.__)("Table caption","comet"),initialOpen:!1},(0,o.createElement)(ue,{...O})),r&&!!r.length&&(0,o.createElement)(w.PanelBody,{title:P,initialOpen:!1},(0,o.createElement)(be,{...T}))),(0,o.createElement)("div",{className:"wp-block-comet-table"},(0,o.createElement)(Me,{...V}))))},save:function({attributes:e}){const{isStackedOnMobile:t,sticky:n,head:l,body:c,foot:r,caption:s,captionStyles:i}=e;if(!l.length&&!c.length&&!r.length)return null;const d=a.useBlockProps.save({className:"table","data-allow-layout-stacking":t,"data-sticky":n}),m=!a.RichText.isEmpty(s||""),h=({type:e,rows:t})=>{if(!t.length)return null;const n=`t${e}`;return(0,o.createElement)(n,null,t.map((({cells:e},t)=>(0,o.createElement)("tr",{key:t},e.map((({content:e,tag:t,className:n,id:l,headers:c,scope:r,rowSpan:s,colSpan:i,styles:d},m)=>(0,o.createElement)(a.RichText.Content,{key:m,tagName:t,className:n||void 0,id:"th"===t&&l||void 0,headers:c||void 0,scope:"th"===t&&r||void 0,value:e,rowSpan:Q(s)>1?Q(s):void 0,colSpan:Q(i)>1?Q(i):void 0,style:J(d)})))))))};return(0,o.createElement)("div",{className:"wp-block-comet-table"},(0,o.createElement)("table",{...d},m&&(0,o.createElement)((()=>(0,o.createElement)(a.RichText.Content,{tagName:"caption",value:s||"",style:i})),null),(0,o.createElement)(h,{type:"head",rows:l}),(0,o.createElement)(h,{type:"body",rows:c}),(0,o.createElement)(h,{type:"foot",rows:r})))},styles:[{name:"stripes",label:(0,l.__)("Stripes","comet")}]};(0,c.registerBlockType)("comet/table",Ve);const Be=(0,s.createHigherOrderComponent)((e=>t=>{const{name:n}=t;return"comet/table"!==n?(0,o.createElement)(e,{...t}):(0,o.createElement)(o.Fragment,null,(0,o.createElement)(a.InspectorControls,null),(0,o.createElement)(e,{...t}))}),"withInspectorControl");(0,r.addFilter)("editor.BlockEdit","comet/tableWithInspectorControls",Be)},609:e=>{e.exports=window.React},848:(e,t,n)=>{e.exports=n(20)}},n={};function o(e){var l=n[e];if(void 0!==l)return l.exports;var c=n[e]={exports:{}};return t[e](c,c.exports,o),c.exports}o.m=t,e=[],o.O=(t,n,l,c)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,l,c]=e[d],r=!0,s=0;s<n.length;s++)(!1&c||a>=c)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(r=!1,c<a&&(a=c));if(r){e.splice(d--,1);var i=l();void 0!==i&&(t=i)}}return t}c=c||0;for(var d=e.length;d>0&&e[d-1][2]>c;d--)e[d]=e[d-1];e[d]=[n,l,c]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var l,c,[a,r,s]=n,i=0;if(a.some((t=>0!==e[t]))){for(l in r)o.o(r,l)&&(o.m[l]=r[l]);if(s)var d=s(o)}for(t&&t(n);i<a.length;i++)c=a[i],o.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return o.O(d)},n=globalThis.webpackChunkcomet_table_block=globalThis.webpackChunkcomet_table_block||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=o.O(void 0,[350],(()=>o(374)));l=o.O(l)})();